#!/usr/bin/perl
use strict;
use warnings;
use lib "lib";
use POSIX ":sys_wait_h";
use Sioux;


-e "sioux.conf" or die("Le fichier de configuration n'existe pas.");
@ARGV == 1 or die("Il faut un argument");

if ($ARGV[0] eq "start") {

  my $pid = fork();

  if ($pid == 0) {
    do "siouxstart";
  }
  else {
    Sioux::enregistrerPID($pid);
  }
  exit;
}

if ($ARGV[0] eq "stop") {
  do "siouxstop";
  exit;
}

if ($ARGV[0] eq "configure") {
  do "siouxconf";
  exit;
}

die("Cet argument n'existe pas");
